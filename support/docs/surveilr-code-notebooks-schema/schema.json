{"name":"Resource Surveillance Notebooks Schema","desc":"","tables":[{"name":"assurance_schema","type":"table","comment":"A Notebook is a group of Cells. A kernel is a computational engine that executes the code contained in a notebook cell.  Each notebook is associated with a kernel of a specific programming language or code transformer which can interpret  code and produce a result. For example, a SQL notebook might use a SQLite kernel for running SQL code and an AI Prompt  might prepare AI prompts for LLMs.","columns":[{"name":"assurance_schema_id","type":"VARCHAR","nullable":false,"default":null,"comment":"assurance_schema primary key and internal label (not a ULID)"},{"name":"assurance_type","type":"TEXT","nullable":false,"default":null,"comment":"'JSON Schema', 'XML Schema', etc."},{"name":"code","type":"TEXT","nullable":false,"default":null,"comment":"If the schema is other than JSON Schema, use this for the validation code"},{"name":"code_json","type":"TEXT","nullable":true,"default":null,"comment":"If the schema is a JSON Schema or the assurance code has a JSON representation"},{"name":"governance","type":"TEXT","nullable":true,"default":null,"comment":"JSON schema-specific governance data (description, documentation, usage, etc. in JSON)"},{"name":"created_at","type":"TIMESTAMP","nullable":true,"default":"CURRENT_TIMESTAMP","comment":""},{"name":"created_by","type":"TEXT","nullable":true,"default":"'UNKNOWN'","comment":""},{"name":"updated_at","type":"TIMESTAMP","nullable":true,"default":null,"comment":""},{"name":"updated_by","type":"TEXT","nullable":true,"default":null,"comment":""},{"name":"deleted_at","type":"TIMESTAMP","nullable":true,"default":null,"comment":""},{"name":"deleted_by","type":"TEXT","nullable":true,"default":null,"comment":""},{"name":"activity_log","type":"TEXT","nullable":true,"default":null,"comment":"{\"isSqlDomainZodDescrMeta\":true,\"isJsonSqlDomain\":true}"}],"indexes":[{"name":"sqlite_autoindex_assurance_schema_1","def":"PRIMARY KEY (assurance_schema_id)","table":"assurance_schema","columns":["assurance_schema_id"],"comment":""}],"constraints":[{"name":"assurance_schema_id","type":"PRIMARY KEY","def":"PRIMARY KEY (assurance_schema_id)","table":"assurance_schema","referenced_table":null,"columns":["assurance_schema_id"],"referenced_columns":null,"comment":""},{"name":"sqlite_autoindex_assurance_schema_1","type":"PRIMARY KEY","def":"PRIMARY KEY (assurance_schema_id)","table":"assurance_schema","referenced_table":null,"columns":["assurance_schema_id"],"referenced_columns":null,"comment":""},{"name":"-","type":"CHECK","def":"CHECK(json_valid(code_json) OR code_json IS NULL)","table":"assurance_schema","referenced_table":null,"columns":["code","code_json"],"referenced_columns":null,"comment":""},{"name":"-","type":"CHECK","def":"CHECK(json_valid(governance) OR governance IS NULL)","table":"assurance_schema","referenced_table":null,"columns":["governance"],"referenced_columns":null,"comment":""}],"triggers":[],"def":"CREATE TABLE \"assurance_schema\" (\n    \"assurance_schema_id\" VARCHAR PRIMARY KEY NOT NULL,\n    \"assurance_type\" TEXT NOT NULL,\n    \"code\" TEXT NOT NULL,\n    \"code_json\" TEXT CHECK(json_valid(code_json) OR code_json IS NULL),\n    \"governance\" TEXT CHECK(json_valid(governance) OR governance IS NULL),\n    \"created_at\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"created_by\" TEXT DEFAULT 'UNKNOWN',\n    \"updated_at\" TIMESTAMP,\n    \"updated_by\" TEXT,\n    \"deleted_at\" TIMESTAMP,\n    \"deleted_by\" TEXT,\n    \"activity_log\" TEXT\n)"},{"name":"code_notebook_kernel","type":"table","comment":"A Notebook is a group of Cells. A kernel is a computational engine that executes the code contained in a notebook cell.  Each notebook is associated with a kernel of a specific programming language or code transformer which can interpret  code and produce a result. For example, a SQL notebook might use a SQLite kernel for running SQL code and an AI Prompt  might prepare AI prompts for LLMs.","columns":[{"name":"code_notebook_kernel_id","type":"VARCHAR","nullable":false,"default":null,"comment":"code_notebook_kernel primary key and internal label (not a ULID)"},{"name":"kernel_name","type":"TEXT","nullable":false,"default":null,"comment":"the kernel name for human/display use cases"},{"name":"description","type":"TEXT","nullable":true,"default":null,"comment":"any further description of the kernel for human/display use cases"},{"name":"mime_type","type":"TEXT","nullable":true,"default":null,"comment":"MIME type of this kernel's code in case it will be served"},{"name":"file_extn","type":"TEXT","nullable":true,"default":null,"comment":"the typical file extension for these kernel's codebases, can be used for syntax highlighting, etc."},{"name":"elaboration","type":"TEXT","nullable":true,"default":null,"comment":"kernel-specific attributes/properties"},{"name":"governance","type":"TEXT","nullable":true,"default":null,"comment":"kernel-specific governance data"},{"name":"created_at","type":"TIMESTAMP","nullable":true,"default":"CURRENT_TIMESTAMP","comment":""},{"name":"created_by","type":"TEXT","nullable":true,"default":"'UNKNOWN'","comment":""},{"name":"updated_at","type":"TIMESTAMP","nullable":true,"default":null,"comment":""},{"name":"updated_by","type":"TEXT","nullable":true,"default":null,"comment":""},{"name":"deleted_at","type":"TIMESTAMP","nullable":true,"default":null,"comment":""},{"name":"deleted_by","type":"TEXT","nullable":true,"default":null,"comment":""},{"name":"activity_log","type":"TEXT","nullable":true,"default":null,"comment":"{\"isSqlDomainZodDescrMeta\":true,\"isJsonSqlDomain\":true}"}],"indexes":[{"name":"sqlite_autoindex_code_notebook_kernel_2","def":"UNIQUE (kernel_name)","table":"code_notebook_kernel","columns":["kernel_name"],"comment":""},{"name":"sqlite_autoindex_code_notebook_kernel_1","def":"PRIMARY KEY (code_notebook_kernel_id)","table":"code_notebook_kernel","columns":["code_notebook_kernel_id"],"comment":""}],"constraints":[{"name":"code_notebook_kernel_id","type":"PRIMARY KEY","def":"PRIMARY KEY (code_notebook_kernel_id)","table":"code_notebook_kernel","referenced_table":null,"columns":["code_notebook_kernel_id"],"referenced_columns":null,"comment":""},{"name":"sqlite_autoindex_code_notebook_kernel_2","type":"UNIQUE","def":"UNIQUE (kernel_name)","table":"code_notebook_kernel","referenced_table":null,"columns":["kernel_name"],"referenced_columns":null,"comment":""},{"name":"sqlite_autoindex_code_notebook_kernel_1","type":"PRIMARY KEY","def":"PRIMARY KEY (code_notebook_kernel_id)","table":"code_notebook_kernel","referenced_table":null,"columns":["code_notebook_kernel_id"],"referenced_columns":null,"comment":""},{"name":"-","type":"CHECK","def":"CHECK(json_valid(elaboration) OR elaboration IS NULL)","table":"code_notebook_kernel","referenced_table":null,"columns":["elaboration"],"referenced_columns":null,"comment":""},{"name":"-","type":"CHECK","def":"CHECK(json_valid(governance) OR governance IS NULL)","table":"code_notebook_kernel","referenced_table":null,"columns":["governance"],"referenced_columns":null,"comment":""}],"triggers":[],"def":"CREATE TABLE \"code_notebook_kernel\" (\n    \"code_notebook_kernel_id\" VARCHAR PRIMARY KEY NOT NULL,\n    \"kernel_name\" TEXT NOT NULL,\n    \"description\" TEXT,\n    \"mime_type\" TEXT,\n    \"file_extn\" TEXT,\n    \"elaboration\" TEXT CHECK(json_valid(elaboration) OR elaboration IS NULL),\n    \"governance\" TEXT CHECK(json_valid(governance) OR governance IS NULL),\n    \"created_at\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"created_by\" TEXT DEFAULT 'UNKNOWN',\n    \"updated_at\" TIMESTAMP,\n    \"updated_by\" TEXT,\n    \"deleted_at\" TIMESTAMP,\n    \"deleted_by\" TEXT,\n    \"activity_log\" TEXT,\n    UNIQUE(\"kernel_name\")\n)"},{"name":"code_notebook_cell","type":"table","comment":"Each Notebook is divided into cells, which are individual units of interpretable code.  The content of Cells depends on the Notebook Kernel and contain the source code to be  executed by the Notebook's Kernel. The output of the code (text, graphics, etc.) can be  stateless or may be stateful and store its results and state transitions in code_notebook_state.","columns":[{"name":"code_notebook_cell_id","type":"VARCHAR","nullable":false,"default":null,"comment":"code_notebook_cell primary key"},{"name":"notebook_kernel_id","type":"VARCHAR","nullable":false,"default":null,"comment":"{\"isSqlDomainZodDescrMeta\":true,\"isVarChar\":true}"},{"name":"notebook_name","type":"TEXT","nullable":false,"default":null,"comment":""},{"name":"cell_name","type":"TEXT","nullable":false,"default":null,"comment":""},{"name":"cell_governance","type":"TEXT","nullable":true,"default":null,"comment":"any idempotency, versioning, hash, branch, tag or other \"governance\" data (dependent on the cell)"},{"name":"interpretable_code","type":"TEXT","nullable":false,"default":null,"comment":""},{"name":"interpretable_code_hash","type":"TEXT","nullable":false,"default":null,"comment":""},{"name":"description","type":"TEXT","nullable":true,"default":null,"comment":""},{"name":"arguments","type":"TEXT","nullable":true,"default":null,"comment":"{\"isSqlDomainZodDescrMeta\":true,\"isJsonText\":true}"},{"name":"created_at","type":"TIMESTAMP","nullable":true,"default":"CURRENT_TIMESTAMP","comment":""},{"name":"created_by","type":"TEXT","nullable":true,"default":"'UNKNOWN'","comment":""},{"name":"updated_at","type":"TIMESTAMP","nullable":true,"default":null,"comment":""},{"name":"updated_by","type":"TEXT","nullable":true,"default":null,"comment":""},{"name":"deleted_at","type":"TIMESTAMP","nullable":true,"default":null,"comment":""},{"name":"deleted_by","type":"TEXT","nullable":true,"default":null,"comment":""},{"name":"activity_log","type":"TEXT","nullable":true,"default":null,"comment":"{\"isSqlDomainZodDescrMeta\":true,\"isJsonSqlDomain\":true}"}],"indexes":[{"name":"sqlite_autoindex_code_notebook_cell_2","def":"UNIQUE (notebook_name, cell_name, interpretable_code_hash)","table":"code_notebook_cell","columns":["notebook_name","cell_name","interpretable_code_hash"],"comment":""},{"name":"sqlite_autoindex_code_notebook_cell_1","def":"PRIMARY KEY (code_notebook_cell_id)","table":"code_notebook_cell","columns":["code_notebook_cell_id"],"comment":""}],"constraints":[{"name":"code_notebook_cell_id","type":"PRIMARY KEY","def":"PRIMARY KEY (code_notebook_cell_id)","table":"code_notebook_cell","referenced_table":null,"columns":["code_notebook_cell_id"],"referenced_columns":null,"comment":""},{"name":"- (Foreign key ID: 0)","type":"FOREIGN KEY","def":"FOREIGN KEY (notebook_kernel_id) REFERENCES code_notebook_kernel (code_notebook_kernel_id) ON UPDATE NO ACTION ON DELETE NO ACTION MATCH NONE","table":"code_notebook_cell","referenced_table":"code_notebook_kernel","columns":["notebook_kernel_id"],"referenced_columns":["code_notebook_kernel_id"],"comment":""},{"name":"sqlite_autoindex_code_notebook_cell_2","type":"UNIQUE","def":"UNIQUE (notebook_name, cell_name, interpretable_code_hash)","table":"code_notebook_cell","referenced_table":null,"columns":["notebook_name","cell_name","interpretable_code_hash"],"referenced_columns":null,"comment":""},{"name":"sqlite_autoindex_code_notebook_cell_1","type":"PRIMARY KEY","def":"PRIMARY KEY (code_notebook_cell_id)","table":"code_notebook_cell","referenced_table":null,"columns":["code_notebook_cell_id"],"referenced_columns":null,"comment":""},{"name":"-","type":"CHECK","def":"CHECK(json_valid(cell_governance) OR cell_governance IS NULL)","table":"code_notebook_cell","referenced_table":null,"columns":["cell_governance"],"referenced_columns":null,"comment":""},{"name":"-","type":"CHECK","def":"CHECK(json_valid(arguments) OR arguments IS NULL)","table":"code_notebook_cell","referenced_table":null,"columns":["arguments"],"referenced_columns":null,"comment":""}],"triggers":[],"def":"CREATE TABLE \"code_notebook_cell\" (\n    \"code_notebook_cell_id\" VARCHAR PRIMARY KEY NOT NULL,\n    \"notebook_kernel_id\" VARCHAR NOT NULL,\n    \"notebook_name\" TEXT NOT NULL,\n    \"cell_name\" TEXT NOT NULL,\n    \"cell_governance\" TEXT CHECK(json_valid(cell_governance) OR cell_governance IS NULL),\n    \"interpretable_code\" TEXT NOT NULL,\n    \"interpretable_code_hash\" TEXT NOT NULL,\n    \"description\" TEXT,\n    \"arguments\" TEXT CHECK(json_valid(arguments) OR arguments IS NULL),\n    \"created_at\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"created_by\" TEXT DEFAULT 'UNKNOWN',\n    \"updated_at\" TIMESTAMP,\n    \"updated_by\" TEXT,\n    \"deleted_at\" TIMESTAMP,\n    \"deleted_by\" TEXT,\n    \"activity_log\" TEXT,\n    FOREIGN KEY(\"notebook_kernel_id\") REFERENCES \"code_notebook_kernel\"(\"code_notebook_kernel_id\"),\n    UNIQUE(\"notebook_name\", \"cell_name\", \"interpretable_code_hash\")\n)"},{"name":"code_notebook_state","type":"table","comment":"Records the state of a notebook's cells' executions, computations, and results for Kernels that are stateful.  For example, a SQL Notebook Cell that creates tables should only be run once (meaning it's statefule).  Other Kernels might store results for functions and output defined in one cell can be used in later cells.","columns":[{"name":"code_notebook_state_id","type":"VARCHAR","nullable":false,"default":null,"comment":"code_notebook_state primary key"},{"name":"code_notebook_cell_id","type":"VARCHAR","nullable":false,"default":null,"comment":"code_notebook_cell row this state describes"},{"name":"from_state","type":"TEXT","nullable":false,"default":null,"comment":"the previous state (set to \"INITIAL\" when it's the first transition)"},{"name":"to_state","type":"TEXT","nullable":false,"default":null,"comment":"the current state; if no rows exist it means no state transition occurred"},{"name":"transition_result","type":"TEXT","nullable":true,"default":null,"comment":"if the result of state change is necessary for future use"},{"name":"transition_reason","type":"TEXT","nullable":true,"default":null,"comment":"short text or code explaining why the transition occurred"},{"name":"transitioned_at","type":"TIMESTAMP","nullable":true,"default":"CURRENT_TIMESTAMP","comment":"when the transition occurred"},{"name":"elaboration","type":"TEXT","nullable":true,"default":null,"comment":"any elaboration needed for the state transition"},{"name":"created_at","type":"TIMESTAMP","nullable":true,"default":"CURRENT_TIMESTAMP","comment":""},{"name":"created_by","type":"TEXT","nullable":true,"default":"'UNKNOWN'","comment":""},{"name":"updated_at","type":"TIMESTAMP","nullable":true,"default":null,"comment":""},{"name":"updated_by","type":"TEXT","nullable":true,"default":null,"comment":""},{"name":"deleted_at","type":"TIMESTAMP","nullable":true,"default":null,"comment":""},{"name":"deleted_by","type":"TEXT","nullable":true,"default":null,"comment":""},{"name":"activity_log","type":"TEXT","nullable":true,"default":null,"comment":"{\"isSqlDomainZodDescrMeta\":true,\"isJsonSqlDomain\":true}"}],"indexes":[{"name":"sqlite_autoindex_code_notebook_state_2","def":"UNIQUE (code_notebook_cell_id, from_state, to_state)","table":"code_notebook_state","columns":["code_notebook_cell_id","from_state","to_state"],"comment":""},{"name":"sqlite_autoindex_code_notebook_state_1","def":"PRIMARY KEY (code_notebook_state_id)","table":"code_notebook_state","columns":["code_notebook_state_id"],"comment":""}],"constraints":[{"name":"code_notebook_state_id","type":"PRIMARY KEY","def":"PRIMARY KEY (code_notebook_state_id)","table":"code_notebook_state","referenced_table":null,"columns":["code_notebook_state_id"],"referenced_columns":null,"comment":""},{"name":"- (Foreign key ID: 0)","type":"FOREIGN KEY","def":"FOREIGN KEY (code_notebook_cell_id) REFERENCES code_notebook_cell (code_notebook_cell_id) ON UPDATE NO ACTION ON DELETE NO ACTION MATCH NONE","table":"code_notebook_state","referenced_table":"code_notebook_cell","columns":["code_notebook_cell_id"],"referenced_columns":["code_notebook_cell_id"],"comment":""},{"name":"sqlite_autoindex_code_notebook_state_2","type":"UNIQUE","def":"UNIQUE (code_notebook_cell_id, from_state, to_state)","table":"code_notebook_state","referenced_table":null,"columns":["code_notebook_cell_id","from_state","to_state"],"referenced_columns":null,"comment":""},{"name":"sqlite_autoindex_code_notebook_state_1","type":"PRIMARY KEY","def":"PRIMARY KEY (code_notebook_state_id)","table":"code_notebook_state","referenced_table":null,"columns":["code_notebook_state_id"],"referenced_columns":null,"comment":""},{"name":"-","type":"CHECK","def":"CHECK(json_valid(transition_result) OR transition_result IS NULL)","table":"code_notebook_state","referenced_table":null,"columns":["transition_result"],"referenced_columns":null,"comment":""},{"name":"-","type":"CHECK","def":"CHECK(json_valid(elaboration) OR elaboration IS NULL)","table":"code_notebook_state","referenced_table":null,"columns":["elaboration"],"referenced_columns":null,"comment":""}],"triggers":[],"def":"CREATE TABLE \"code_notebook_state\" (\n    \"code_notebook_state_id\" VARCHAR PRIMARY KEY NOT NULL,\n    \"code_notebook_cell_id\" VARCHAR NOT NULL,\n    \"from_state\" TEXT NOT NULL,\n    \"to_state\" TEXT NOT NULL,\n    \"transition_result\" TEXT CHECK(json_valid(transition_result) OR transition_result IS NULL),\n    \"transition_reason\" TEXT,\n    \"transitioned_at\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"elaboration\" TEXT CHECK(json_valid(elaboration) OR elaboration IS NULL),\n    \"created_at\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \"created_by\" TEXT DEFAULT 'UNKNOWN',\n    \"updated_at\" TIMESTAMP,\n    \"updated_by\" TEXT,\n    \"deleted_at\" TIMESTAMP,\n    \"deleted_by\" TEXT,\n    \"activity_log\" TEXT,\n    FOREIGN KEY(\"code_notebook_cell_id\") REFERENCES \"code_notebook_cell\"(\"code_notebook_cell_id\"),\n    UNIQUE(\"code_notebook_cell_id\", \"from_state\", \"to_state\")\n)"}],"relations":[{"table":"code_notebook_cell","columns":["notebook_kernel_id"],"cardinality":"Zero or more","parent_table":"code_notebook_kernel","parent_columns":["code_notebook_kernel_id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (notebook_kernel_id) REFERENCES code_notebook_kernel (code_notebook_kernel_id) ON UPDATE NO ACTION ON DELETE NO ACTION MATCH NONE","virtual":false},{"table":"code_notebook_state","columns":["code_notebook_cell_id"],"cardinality":"Zero or more","parent_table":"code_notebook_cell","parent_columns":["code_notebook_cell_id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (code_notebook_cell_id) REFERENCES code_notebook_cell (code_notebook_cell_id) ON UPDATE NO ACTION ON DELETE NO ACTION MATCH NONE","virtual":false}],"functions":null,"driver":{"name":"sqlite","database_version":"3.39.4","meta":{}}}
